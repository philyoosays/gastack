<% include ../partials/boilerplate %>

<% if( mode === 'newpost') { %>
  <form action="/main/post/new" method="post">
<% } else if(mode === 'newcomment') { %>
  <form action="/main/comment/<%= postid %>/new" method="post">
<% } else if (mode === 'editpost') { %>
  <form action="/main/post/<%= postid %>/edit?_method=put" method="post">
<% } %>
  <div class="buttoncentered">
    <% if(mode === 'newpost') { %>
      <h1 class="header">New Post</h1>
    <% else if(mode === 'editpost') { %>
      <h1 class="header">Edit Post</h1>
    <% } else if(mode === 'newpost' || mode === 'editpost') { %>
      <hr />
      <label for="new-post-title">Title</label>
      <br/>
      <input type="text" id="new-post-title" name="title" placeholder="Pick a good title for your post..." required>
      <br/>
    <% } else if(mode === 'newcomment') { %>
      <h1 class="header">New Comment</h1>
      <hr />
    <% } %>
    <div id="editor">
    </div>
    <% window.onload = function() { %>
      <% if(Object.keys(post).length > 1) { %>
        <% var editor = document.querySelector('.ql-editor') %>
        <% editor.innerHTML = post.posthtml %>
      <% } %>
    <% } %>
    <input id="submitformhtml" name="submitformhtml" type="text" style="display: none">
    <input id="submitformtext" name="submitformtext" type="text" style="display: none">
    <div class="buttoncentered">
      <input type="submit" value="Post" onClick="storeFormData()">
    </div>
  </div>
</form>

<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="../../../quill-emoji/dist/quill-emoji.js"></script>
<script src="../../../scripts/scriptPost.js"></script>

<% include ../partials/foot %>
